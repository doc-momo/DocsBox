import{_ as h,r as v,D as x,i as w,b as c,j as r,d,e as u,h as b,u as k,N as y}from"./index-kf-u0agq.js";const C={class:"docsbox-img-upload-box"},I=["src"],B={key:1},R={__name:"upload",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(m){const i=v(null),l=x(m,"modelValue"),p=a=>{const e=a.name.toLowerCase();return e.endsWith(".png")||e.endsWith(".ico")},f=a=>new Promise(e=>{const t=new FileReader;t.onload=s=>{const o=new Image;o.onload=()=>{const n=document.createElement("canvas");n.width=o.width,n.height=o.height,n.getContext("2d").drawImage(o,0,0),n.toBlob(_=>{e(_)},"image/png")},o.src=s.target.result},t.readAsDataURL(a)}),g=async a=>{const e=a.target.files[0];if(!e)return;let t=e;if(!p(e))try{t=await f(e)}catch(o){console.error("图片转换失败:",o)}const s=new FileReader;s.onload=o=>{l.value=o.target.result},t instanceof Blob,s.readAsDataURL(t)};return(a,e)=>{const t=w("el-icon");return r(),c("div",C,[d("div",{class:"docsbox-upload-img",onClick:e[0]||(e[0]=s=>i.value.click())},[l.value?(r(),c("img",{key:0,style:{"max-height":"100%"},src:l.value},null,8,I)):(r(),c("div",B,[u(t,null,{default:b(()=>[u(k(y))]),_:1})]))]),d("input",{class:"docsbox-file-input",ref_key:"fileInput",ref:i,name:"file",type:"file",accept:"image/*",onChange:g},null,544)])}}},L=h(R,[["__scopeId","data-v-f2649f2e"]]);export{L as u};

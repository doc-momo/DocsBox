import{_ as b,B as k,C as w,D as y,r as u,o as T,V,v as m,m as x,b as I,j as M}from"./index-kf-u0agq.js";const S={id:"vditor",class:"docsbox-vditor"},N={__name:"markdown",props:{modelValue:{},modelModifiers:{}},emits:k(["loading"],["update:modelValue"]),setup(p,{emit:f}){const i=w(),s=y(p,"modelValue"),t=u(),c=u(!1),v=f,h=e=>{t.value.setTheme(e?"dark":"classic")};return T(()=>{t.value=new V("vditor",{height:"100%",width:"100%",value:s.value||"",tab:"    ",typewriterMode:!0,preview:{hljs:{lineNumber:!0,style:"vs"}},blur(e){s.value=e},input:e=>{s.value=e},after:()=>{v("loading",!1),c.value=!0,i.theme?t.value.setTheme("dark"):t.value.setTheme("classic")},cache:{enable:!1},upload:{accept:"image/*,.mp3,.wav,.rar",token:"test",url:"/api/upload/editor.php",linkToImgUrl:"/api/upload/fetch.php",filename(e){return e.replace(/[^(a-zA-Z0-9\u4e00-\u9fa5\.)]/g,"").replace(/[\?\\/:|<>*\[\]\(\)\$%\{\}@~]/g,"").replace(/\s/g,"")},format(e,r){const l=JSON.parse(r),o=l;if(o.ret_code===200&&o.result&&o.result.cover_files){const a=o.result.cover_files,d=a.lastIndexOf("/"),g=decodeURI(d!==-1?a.substring(d+1):a),_=a,n={};return n[g]=_,JSON.stringify({msg:l.msg||"success",code:l.ret_code,data:{errFiles:[],succMap:n}})}}},toolbarConfig:{pin:!0},mode:"wysiwyg",theme:"classic",customWysiwygToolbar:function(){return[]},toolbar:["emoji","headings","bold","italic","strike","|","line","quote","list","ordered-list","check","table","outdent","indent","code","inline-code","insert-after","insert-before","upload","link","record","edit-mode","both","preview","outline","export","fullscreen"]})}),m(s,e=>{c.value&&t.value&&t.value.getValue()!==e&&t.value.setValue(e||"")}),m(()=>i.theme,(e,r)=>{h(e)}),x(()=>{t.value&&t.value.destroy()}),(e,r)=>(M(),I("div",S))}},j=b(N,[["__scopeId","data-v-99a77bc0"]]);export{j as m};

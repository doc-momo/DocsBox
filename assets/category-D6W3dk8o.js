import{_ as Z,r as i,v as P,b as A,j as u,d as p,e as o,x as m,h as a,k as n,t as h,i as s,g as y,F as N,q as ee,y as te,z as le,n as D,u as j,E as g,l as ae}from"./index-kf-u0agq.js";const oe={class:"docsbox-container"},ne={class:"docsbox-header"},ue={class:"docsbox-main"},se={class:"docsbox-custom-tree-node"},de={key:0},re={key:0,class:"docsbox-footer"},ie={class:"docsbox-dialog-footer"},pe={class:"docsbox-dialog-footer"},me={__name:"category",props:{modelValue:{type:Array,default:()=>[]},pageItems:{type:Array,default:()=>[]},title:{type:String,default:"分类管理"},pages:{type:Boolean,default:!0},saveButton:{type:Boolean,default:!0},selectItem:{type:String,default:""}},emits:["page-change","update:modelValue","save","update:selectItem"],setup(f,{emit:q}){const C=f,w=q,_=i(C.selectItem);P(()=>C.selectItem,l=>{_.value=l}),P(_,l=>{w("update:selectItem",l)});const x=i(!1),V=i(""),k=i(""),I=i(""),b=i(!1),B=i(""),U=i(""),z=l=>{w("page-change",l)},L=()=>{w("save")},O=(l,e,d)=>e.data.type==="cat"&&l.data.type==="cat"?d!=="inner":l.data.type==="cat"&&e.parent.data.type==="cat"?!1:e.data.type==="file"||e.data.type==="url"?d!=="inner":!0,S=l=>{V.value=l,k.value="",I.value="",x.value=!0},K=()=>{if(!k.value.trim()){g.warning("请输入名称");return}const l={label:k.value,type:V.value};V.value==="url"&&(l.url=I.value);const e=[...C.modelValue];e.push(l),w("update:modelValue",e),x.value=!1,g.success("添加成功")},G=(l,e)=>{if(e.type==="cat"&&e.children&&e.children.length>0){g.warning("该分类下存在内容，请先清空分类后再删除");return}ae.confirm("确定要删除该项目吗？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let d;l.parent&&l.parent.level!==0?d=l.parent.data.children:d=C.modelValue;const T=d.findIndex(E=>E===e);T>-1&&(d.splice(T,1),g.success("删除成功"))}).catch(()=>{g.info("已取消删除")})};let v=null;const H=l=>{v=l,B.value=l.label,U.value=l.url||"",b.value=!0},M=()=>{v&&(v.label=B.value,v.type==="url"&&(v.url=U.value),b.value=!1,g.success("更新成功"))};return(l,e)=>{const d=s("el-text"),T=s("el-option"),E=s("el-select"),r=s("el-button"),J=s("Memo"),Q=s("Paperclip"),R=s("Tickets"),W=s("el-icon"),X=s("el-tree"),$=s("el-input"),F=s("el-dialog");return u(),A(N,null,[p("div",oe,[p("div",ne,[o(d,null,{default:a(()=>[n(h(f.title),1)]),_:1}),p("div",null,[f.pages?(u(),y(E,{key:0,modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value=t),placeholder:"Select",style:{width:"240px","margin-right":"10px"},onChange:z},{default:a(()=>[(u(!0),A(N,null,ee(f.pageItems,t=>(u(),y(T,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):m("",!0),o(r,{type:"primary",onClick:e[1]||(e[1]=t=>S("cat"))},{default:a(()=>[...e[12]||(e[12]=[n("添加分类",-1)])]),_:1}),o(r,{type:"primary",onClick:e[2]||(e[2]=t=>S("url"))},{default:a(()=>[...e[13]||(e[13]=[n("添加链接",-1)])]),_:1})])]),p("div",ue,[o(X,{"allow-drop":O,data:f.modelValue,draggable:"","default-expand-all":"","empty-text":"暂无数据"},{default:a(({node:t,data:c})=>[p("div",se,[o(d,null,{default:a(()=>[o(W,null,{default:a(()=>[c.type==="cat"?(u(),y(J,{key:0})):m("",!0),c.type==="url"?(u(),y(Q,{key:1})):m("",!0),c.type==="file"?(u(),y(R,{key:2})):m("",!0)]),_:2},1024),p("span",null,[(u(),y(te(le(t.label))))])]),_:2},1024),c.type!=="file"?(u(),A("div",de,[o(r,{type:"primary",link:"",onClick:Y=>H(c)},{default:a(()=>[...e[14]||(e[14]=[n(" 编辑 ",-1)])]),_:1},8,["onClick"]),o(r,{style:{"margin-left":"4px"},type:"danger",link:"",onClick:Y=>G(t,c)},{default:a(()=>[...e[15]||(e[15]=[n(" 删除 ",-1)])]),_:1},8,["onClick"])])):m("",!0)])]),_:1},8,["data"])]),f.saveButton?(u(),A("div",re,[o(r,{type:"primary",onClick:e[3]||(e[3]=t=>L())},{default:a(()=>[...e[16]||(e[16]=[n(" 保存设置 ",-1)])]),_:1})])):m("",!0)]),o(F,{modelValue:x.value,"onUpdate:modelValue":e[7]||(e[7]=t=>x.value=t),title:"添加"+(V.value==="cat"?"分类":"链接"),width:"500"},{footer:a(()=>[p("div",ie,[o(r,{type:"primary",onClick:e[6]||(e[6]=t=>x.value=!1)},{default:a(()=>[...e[19]||(e[19]=[n("取消",-1)])]),_:1}),o(r,{type:"primary",onClick:K},{default:a(()=>[...e[20]||(e[20]=[n(" 添加 ",-1)])]),_:1})])]),default:a(()=>[o($,{modelValue:k.value,"onUpdate:modelValue":e[4]||(e[4]=t=>k.value=t),style:{"max-width":"600px","margin-bottom":"20px"},placeholder:"请输入名称",onKeyup:D(K,["enter"])},{prepend:a(()=>[...e[17]||(e[17]=[n("名称",-1)])]),_:1},8,["modelValue"]),V.value==="url"?(u(),y($,{key:0,modelValue:I.value,"onUpdate:modelValue":e[5]||(e[5]=t=>I.value=t),style:{"max-width":"600px"},placeholder:"请输入链接路径",onKeyup:D(K,["enter"])},{prepend:a(()=>[...e[18]||(e[18]=[n("链接",-1)])]),_:1},8,["modelValue"])):m("",!0)]),_:1},8,["modelValue","title"]),o(F,{modelValue:b.value,"onUpdate:modelValue":e[11]||(e[11]=t=>b.value=t),title:"编辑"+(j(v)?.type==="cat"?"分类":"链接"),width:"500"},{footer:a(()=>[p("div",pe,[o(r,{type:"primary",onClick:e[10]||(e[10]=t=>b.value=!1)},{default:a(()=>[...e[23]||(e[23]=[n("取消",-1)])]),_:1}),o(r,{type:"primary",onClick:M},{default:a(()=>[...e[24]||(e[24]=[n(" 更新 ",-1)])]),_:1})])]),default:a(()=>[o($,{modelValue:B.value,"onUpdate:modelValue":e[8]||(e[8]=t=>B.value=t),style:{"max-width":"600px","margin-bottom":"20px"},placeholder:"请输入名称",onKeyup:D(M,["enter"])},{prepend:a(()=>[...e[21]||(e[21]=[n("名称",-1)])]),_:1},8,["modelValue"]),j(v)?.type==="url"?(u(),y($,{key:0,modelValue:U.value,"onUpdate:modelValue":e[9]||(e[9]=t=>U.value=t),style:{"max-width":"600px"},placeholder:"请输入链接路径",onKeyup:D(M,["enter"])},{prepend:a(()=>[...e[22]||(e[22]=[n("链接",-1)])]),_:1},8,["modelValue"])):m("",!0)]),_:1},8,["modelValue","title"])],64)}}},ve=Z(me,[["__scopeId","data-v-1b774eac"]]);export{ve as C};
